<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Select Shop - Milk Memo</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background: #f0f0f0;
      padding: 20px;
    }
    .grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-bottom: 30px;
    }
    .shop-card {
      width: 150px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 12px;
      padding: 10px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-decoration: none;
      color: black;
    }
    .shop-card img {
      width: 100%;
      height: 100px;
      object-fit: contain;
      border-radius: 8px;
    }
    .shop-name {
      margin-top: 8px;
      font-weight: bold;
    }
    .grand-total {
      font-size: 1.4em;
      font-weight: bold;
      color: darkblue;
      margin-top: 20px;
    }
    .clear-btn {
      margin-top: 10px;
      padding: 5px 15px;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <h2>ðŸ›’ Select a Shop</h2>
  <div class="grid" id="shopGrid"></div>

  <div class="grand-total" id="grandTotal"></div>
  <button class="clear-btn" onclick="clearTotals()">Clear All Totals</button>

  <script>
    const shopNames = [
      "Chowdeshwari", "Raghu", "Milk point", "Muslim angadi", "Vignesha", "Krishnappa",
      "Reddy andra", "Raajashekhar", "Lakshmama", "Navya prakash pakkana angadi aludu",
      "Pk home", "Prakash", "Vignesha pakkana", "Muslamma", "Muslim bakery", "Bhaskar",
      "Naganna bakery", "Aunty", "Balaji", "Uma", "Canara Bank", "Cafe", "Beeda shop", "Manjunatha bakery"
    ];

    const grid = document.getElementById("shopGrid");
    const totalBox = document.getElementById("grandTotal");

    function renderShops() {
      shopNames.forEach(name => {
        const imageName = name.replaceAll(" ", "%20") + ".png";
        const link = document.createElement("a");
        link.href = `milk.html?shop=${encodeURIComponent(name)}`;
        link.className = "shop-card";
        link.innerHTML = `
          <img src="images/${imageName}" alt="${name}" onerror="this.src='images/fallback.png'">
          <div class="shop-name">${name}</div>
        `;
        grid.appendChild(link);
      });
    }

    function updateGrandTotal() {
      const totals = JSON.parse(localStorage.getItem("shopTotals") || "{}");
      const grand = Object.values(totals).reduce((acc, val) => acc + val, 0);
      totalBox.innerText = `Grand Total for All Shops: â‚¹${grand}`;
    }

    function clearTotals() {
      localStorage.removeItem("shopTotals");
      updateGrandTotal();
      alert("All shop totals cleared!");
    }

    renderShops();
    updateGrandTotal();
  </script>
</body>
</html>
